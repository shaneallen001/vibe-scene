<form class="vibe-scene-form">
  <div class="form-group full-width header-actions"
    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
    <label for="sceneName" style="flex: 0 0 auto;">Scene Name</label>
    <button class="open-studio" title="Open AI Studio"
      style="flex: 0 0 auto; width: auto; padding: 0 10px; line-height: 24px;">
      <i class="fas fa-paint-brush"></i> Studio
    </button>
  </div>
  <div class="form-group full-width">
    <input type="text" name="sceneName" id="sceneName" value="Generated Dungeon" placeholder="Enter scene name"
      style="width: 100%;" />
  </div>

  <div class="vibe-scene-grid-3">
    <div class="form-group">
      {{> "modules/vibe-common/templates/components/vibe-select.hbs" name="size" options=sizeOptions
      selectedValue="medium" labelText="Dungeon Size"}}
    </div>

    <div class="form-group">
      {{> "modules/vibe-common/templates/components/vibe-select.hbs" name="maskType" options=shapeOptions
      labelText="Dungeon Shape"}}
    </div>

    <div class="form-group">
      {{> "modules/vibe-common/templates/components/vibe-select.hbs" name="symmetry" options=symmetryOptions
      labelText="Symmetry"}}
    </div>
  </div>

  <div class="vibe-scene-grid-3">
    <div class="form-group">
      {{> "modules/vibe-common/templates/components/vibe-select.hbs" name="connectivity" options=connectivityOptions
      labelText="Connectivity"}}
    </div>

    <div class="form-group">
      {{> "modules/vibe-common/templates/components/vibe-select.hbs" name="corridorStyle" options=corridorOptions
      labelText="Corridor Style"}}
    </div>

    <div class="form-group">
      {{> "modules/vibe-common/templates/components/vibe-select.hbs" name="generationMode" options=generationModeOptions
      selectedValue=generationMode labelText="Generation Mode"}}
    </div>

    <div class="form-group" style="grid-column: span 1;">
      <div style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 4px;">
        <label for="dungeonDescription" style="margin-bottom: 0;">Dungeon Prompt</label>
        <button type="button" class="vibe-btn vibe-btn-sm btn-generate-flavor" title="Write Flavor Text with AI"
          style="width: auto; padding: 2px 8px; font-size: 11px;">
          <i class="fas fa-magic"></i> Auto-writer
        </button>
      </div>
      <textarea name="dungeonDescription" id="dungeonDescription"
        placeholder="Describe your dungeon (e.g., 'A fiery temple with a frozen treasure room')..."
        style="width: 100%; height: 60px; resize: vertical;"></textarea>
    </div>
  </div>

  <div class="vibe-scene-grid-2">
    <div class="form-group">
      <label for="density">Room Density: <span id="densityVal">{{density}}</span></label>
      <input type="range" name="density" id="density" min="0.1" max="1.0" step="0.1" value="{{density}}"
        oninput="document.getElementById('densityVal').innerText = this.value" />
    </div>

    <div class="form-group">
      <label for="doorDensity">Door Density: <span id="doorDensityVal">{{doorDensity}}</span></label>
      <input type="range" name="doorDensity" id="doorDensity" min="0" max="1" step="0.1" value="{{doorDensity}}"
        oninput="document.getElementById('doorDensityVal').innerText = this.value" />
    </div>
  </div>

  <details class="advanced-options">
    <summary>Advanced Options</summary>
    <div class="vibe-scene-grid-2">
      <div class="form-group">
        {{> "modules/vibe-common/templates/components/vibe-select.hbs" name="deadEndRemoval" options=deadEndOptions
        labelText="Dead Ends"}}
      </div>

      <div class="form-group check">
        {{> "modules/vibe-common/templates/components/vibe-toggle.hbs" name="peripheralEgress" checked=peripheralEgress
        labelText="Peripheral Egress"}}
      </div>
    </div>

    <div class="vibe-scene-grid-3">


      <div class="form-group">
        <label for="seed">Seed</label>
        <input type="number" name="seed" id="seed" placeholder="Random" title="Leave empty for random" />
      </div>

      <div class="form-group">
        <label for="gridSize">Grid Size (px)</label>
        <input type="number" name="gridSize" id="gridSize" value="{{defaultGridSize}}" min="50" max="200" />
      </div>
    </div>
  </details>

  <div class="status-bar">
    <div class="status-message">Ready</div>
    <div class="progress-track">
      <div class="progress-bar" style="width: 0%"></div>
    </div>
  </div>
</form>