<form class="vibe-scene-form">
  <div class="form-group full-width header-actions"
    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
    <label for="sceneName" style="flex: 0 0 auto;">Scene Name</label>
    <button class="open-studio" title="Open AI Studio"
      style="flex: 0 0 auto; width: auto; padding: 0 10px; line-height: 24px;">
      <i class="fas fa-paint-brush"></i> Studio
    </button>
  </div>
  <div class="form-group full-width">
    <input type="text" name="sceneName" id="sceneName" value="Generated Dungeon" placeholder="Enter scene name"
      style="width: 100%;" />
  </div>

  <div class="vibe-scene-grid-3">
    <div class="form-group">
      <label for="size">Dungeon Size</label>
      <select name="size" id="size">
        {{#each sizeOptions}}
        <option value="{{value}}" {{#if (eq value "MEDIUM" )}}selected{{/if}}>{{label}}</option>
        {{/each}}
      </select>
    </div>

    <div class="form-group">
      <label for="maskType">Dungeon Shape</label>
      <select name="maskType" id="maskType">
        {{#each shapeOptions}}
        <option value="{{value}}">{{label}}</option>
        {{/each}}
      </select>
    </div>

    <div class="form-group">
      <label for="symmetry">Symmetry</label>
      <select name="symmetry" id="symmetry">
        {{#each symmetryOptions}}
        <option value="{{value}}">{{label}}</option>
        {{/each}}
      </select>
    </div>
  </div>

  <div class="vibe-scene-grid-3">
    <div class="form-group">
      <label for="connectivity">Connectivity</label>
      <select name="connectivity" id="connectivity">
        {{#each connectivityOptions}}
        <option value="{{value}}">{{label}}</option>
        {{/each}}
      </select>
    </div>

    <div class="form-group">
      <label for="corridorStyle">Corridor Style</label>
      <select name="corridorStyle" id="corridorStyle">
        {{#each corridorOptions}}
        <option value="{{value}}">{{label}}</option>
        {{/each}}
      </select>
    </div>

    <div class="form-group">
      <label for="floorStyle">Floor Style</label>
      <select name="floorStyle" id="floorStyle">
        <option value="">Default (Solid Color)</option>
        {{#each styles}}
        <option value="{{this.value}}">{{this.label}}</option>
        {{/each}}
      </select>
    </div>
  </div>

  <div class="vibe-scene-grid-2">
    <div class="form-group">
      <label for="density">Room Density: <span id="densityVal">{{density}}</span></label>
      <input type="range" name="density" id="density" min="0.1" max="1.0" step="0.1" value="{{density}}"
        oninput="document.getElementById('densityVal').innerText = this.value" />
    </div>

    <div class="form-group">
      <label for="doorDensity">Door Density: <span id="doorDensityVal">{{doorDensity}}</span></label>
      <input type="range" name="doorDensity" id="doorDensity" min="0" max="1" step="0.1" value="{{doorDensity}}"
        oninput="document.getElementById('doorDensityVal').innerText = this.value" />
    </div>
  </div>

  <details class="advanced-options">
    <summary>Advanced Options</summary>
    <div class="vibe-scene-grid-2">
      <div class="form-group">
        <label for="deadEndRemoval">Dead Ends</label>
        <select name="deadEndRemoval" id="deadEndRemoval">
          {{#each deadEndOptions}}
          <option value="{{value}}">{{label}}</option>
          {{/each}}
        </select>
      </div>

      <div class="form-group check">
        <label for="peripheralEgress">Peripheral Egress</label>
        <div class="checkbox-wrapper">
          <input type="checkbox" name="peripheralEgress" id="peripheralEgress" {{#if peripheralEgress}}checked{{/if}} />
          <span class="notes">Create exits at the edge?</span>
        </div>
      </div>
    </div>

    <div class="vibe-scene-grid-3">
      <div class="form-group">
        <label>Stairs (Up / Down)</label>
        <div class="flex-row" style="display: flex; gap: 5px;">
          <input type="number" name="stairsUp" value="{{stairs.up}}" min="0" placeholder="Up" style="width: 50%;">
          <input type="number" name="stairsDown" value="{{stairs.down}}" min="0" placeholder="Down" style="width: 50%;">
        </div>
      </div>

      <div class="form-group">
        <label for="seed">Seed</label>
        <input type="number" name="seed" id="seed" placeholder="Random" title="Leave empty for random" />
      </div>

      <div class="form-group">
        <label for="gridSize">Grid Size (px)</label>
        <input type="number" name="gridSize" id="gridSize" value="{{defaultGridSize}}" min="50" max="200" />
      </div>
    </div>
  </details>
</form>